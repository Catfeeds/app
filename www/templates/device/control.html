<ion-view view-title="{{sensor.title}}">
    <ion-nav-bar class="bar-positive">
        <ion-nav-back-button class="button-clear">
        </ion-nav-back-button>
    </ion-nav-bar>
    <ion-content has-subheader="false" class="device control">
        <div class="padding">
        	<!-- tab -->
            <div class="button-bar padding">
                <a class="button button-small" ng-class="{'button-stable': tab!='control', 'button-positive': tab=='control'}" ng-click="show('control')">控制</a>
                <a class="button button-small" ng-class="{'button-stable': tab!='detail', 'button-positive': tab=='detail'}" ng-click="show('detail')">明细</a>
            </div>
            <div class="padding control-panel" ng-show="tab=='control'">
                <!-- 根据设备类型 include -->
                <div class="" ng-include="get_template(sensor)" scope="" onload=""></div>             
            </div>
            <div class="control detail-panel" ng-show="tab=='detail'">
                <div class="padding row header-recent">
                    <div class="col">
                        <div class="round shape">
                            上班 {{recent | percent : 'onDuty' | number: 0}} %
                        </div>
                    </div>
                    <div class="col">
                        <h5>最近六月</h5>
                        <p><span class="h3 positive" ng-bind="recent | sum : 'sum'|number:2"></span> 度</p>
                    </div>
                </div>
            	<table class="table bt">
		            <tbody>
		                <tr ng-repeat="row in recent" ng-click="go(row)">
		                    <td>{{row.month}}</td>
		                    <td>{{row.sum | number: 2}}度</td>
		                    <td> 
                                <div class="responsive-sm round">
                                    <p>上班 {{row.onDutyPercent|number: 0}}%</p>
                                    <p>下班 {{row.offDutyPercent|number: 0}}%</p>
                                </div>
                            </td>
		                </tr>
		            </tbody>
		        </table>
            </div>
        </div>
    </ion-content>
</ion-view>
